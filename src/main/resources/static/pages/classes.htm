

<body>
    <h1>Classes</h1>
    <p>
        <a href="/index.htm">Home Page</a>
    </p>

    <p>
        limit: <input id="limit" type="number" />
        offset: <input id="offset" type="number" />
        <button onclick="sendRequest()">获取</button>
    </p>


    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>班级名</th>
                <th>班主任</th>
                <th>年级</th>
            </tr>
        </thead>
        <tbody id="table">
        </tbody>
    </table>

    <script>
        const table = document.getElementById('table')
        const limitInput = document.getElementById('limit')
        const offsetInput = document.getElementById('offset')

        const classes = ['一班', '二班', '三班']
        const grade = ['一年级', '二年级', '三年级', '四年级']

        function addRow(record) {
            let recordHtml = ''
            recordHtml += '<tr>'
            recordHtml += '<td>' + record.id + '</td>'
            recordHtml += '<td>' + classes[record.name - 1] + '</td>'
            recordHtml += '<td>' + record.managerId + '</td>'
            recordHtml += '<td>' + grade[record.gradeId - 1] + '</td>'
            recordHtml += '<tr>'
            table.innerHTML += recordHtml
        }

        async function getClasses(limit, offset) {
            const url = 'http://localhost:8080/classes/list?limit=' + limit + '&offset=' + offset
            console.log('请求地址', url)
            const data = await fetch(url).then(function getRequestFromAPI(response) {
                return response.json()
            })
            return data
        }

        async function sendRequest() {
            const limit = limitInput.value
            const offset = offsetInput.value
            const data = await getClasses(limit, offset)
            console.log('请求返回值：', data)

            table.innerHTML = ''
            for (let i = 0; i < data.length; i++) {
                addRow(data[i])
            }
        }

        
    </script>
</body>

</html>